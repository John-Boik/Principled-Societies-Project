{% extends "layout.html" %}

{% block title %}
<title>Results</title>
{% endblock %}


{% block page_head %}

<script src="{{ url_for('static', filename='brython/src/brython.js') }}"></script>
<script type="text/python" src="{{ url_for('static', filename='python/layout.py') }}"></script>
<script src="{{ url_for('static', filename='javascript/jquery.knob.min.js') }}"></script>

 <link rel="stylesheet" href="{{ url_for('static', filename='css/ledda_results.css') }}" >

{% endblock %}


{% block body %}

<!-- ========================== Initialize ============================================== -->

<script type="text/python">
from browser import window
results = {{ results|safe }}
window.results = results
</script>

<script type="text/python"
src="{{ url_for('static', filename='python/results.py') }}"></script>

<!--<script src="http://ariutta.github.io/svg-pan-zoom/dist/svg-pan-zoom.min.js"></script>-->
<script src="{{ url_for('static', filename='javascript/svg-pan-zoom.min.js')  }}"></script>

<script type="text/javascript" 
src="{{ url_for('static', filename='javascript/highcharts.js')  }}"></script>

<script type="text/javascript" 
src="{{ url_for('static', filename='javascript/exporting.js')  }}"></script>


<!-- ========================== Modal ============================================== -->

<div id="modal_container" class="modal">
  <div id="modalContentContainer">
    <span id="closeModal">x</span>
    <span id="modalContent"></span>
  </div>
</div>

<!--<div class="container-fluid" id="modal_container">-->
  <!--<div id="modalContentContainer">-->
    <!--<span id="closeModal">x</span>-->
    <!--<span id="modalContent"></span>-->
  <!--</div>-->
<!--</div>-->

<!-- ========================== Group 0 ============================================== -->



<div class="container-fluid">
  <div class="row">
    <div class="col-xl-12 col-lg-12 col-med-12 col-sm-12 cols-xs-12 p-sect result-col">

      <h2 class="green-sect">Fitness Overview</h2>
      <p>The grand fitness is <output id="output_grand_fitness">...wait...</output> T&D.</p>

      <p>The fitness at a single node is the value of abs(total inflow - total outflow), calculated for tokens and dollars separately, then added together. The grand fitness is the sum of fitness values over all nodes. If the grand fitness is less than about 10 T&D on a per-person basis (<output id="threshold_lo">...wait...</output> T&D in this case), then the run can be considered a clear success. If it is above this lower threshold but less than about 100 T&D on a per-person basis (<output id="threshold_hi">...wait...</output> T&D in this case), then the run is OK, but the results are somewhat questionable. If the grand fitness is well above this higher threshold, then all results except fitness might be meaningless. A perfect fitness of zero can be achieved in many ways, but would require that the variables be specified to many significant digits.</p>


        <div id="grand_fitness_table" ></div>

      <p>The cells and nodes of some tables and graphs on this page are color coded to visually highlight their fitness values. For these, a linear gradient is used between gray, signifying zero fitness (best), and red, signifying either a fitness of 1,000 T&D or the maximum node fitness, whichever is larger.</p> 


      <p>Figure 1. Compartments and flows in 20-node steady-state model. Dollar-only flows are in dotted green. Dollar and/or tokens flows are in solid blue.  Line weight signifies size of flow. Node color indicates fitness.</p>
        
        
        <div id='summary_graph_container'></div>
      
      
      <!-- ========================== Group 1 ============================================== -->
        <input type="button" id="more_1" value="More Fitness Overview (Group 1)">



        <div id="org_funding_table" ></div>
        <br>
          
        <div id="compartment_flow_summary_table" ></div>
        <br>

        <div id="params_table" ></div>
        <br>

        <div id="node_fitness_summary_table" ></div>
        
        
      <!-- ========================== Group 2 ============================================== -->

      <h2 style="clear:both;">Results: Starting Conditions and Targets</h2> 
      <p>The results in this section follow directly from the values chosen for starting conditions and targets.  </p>
      <input type="button" id="more_2" value="More Starting (Group 2)">

      <div id="income_dist"></div>
      <div id="graph_person_counts"></div>
      <div id="graph_pct_employed_workforce"></div>
      <div id="graph_pie_employed_member_workforce"></div>
      <div id="graph_mean_family_income"></div>
      <div id="group_2_summary_table" ></div>



      <!-- ========================== Group 3 ============================================== -->
      <h2 style="clear:both;">Results: Variables</h2>  
      <p>Given starting conditions and targets, the results in this section follow directly from the values chosen for variables.</p>

        <input type="button" id="more_3" value="More Variables (Group 3)" onClick="$('#detailed_graph_container').show();">

        <h3 style="clear:both;">Summary tables</h3> 
        
        <div id="group_3b_node_table" ></div>

        <h3 style="clear:both;">Detailed graph</h3>
    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-xl-12 col-lg-12 col-med-12 col-sm-12 cols-xs-12 p-sect result-col">

        <div id="detailed_graph_container">
          <div class="col col-xl-1 col-lg-1 col-med-2 col-sm-12" id="graph_left"></div>
          <div class="col col-xl-11 col-lg-11 col-med-11 col-xs-12" id="graph_right"></div>  
        </div>

        <br clear="all">
      <!-- ========================== Group 4 ============================================== -->

    </div>
  </div>
</div>

<div class="container-fluid">
  <div class="row">
    <div class="col-xl-12 col-lg-12 col-med-12 col-sm-12 cols-xs-12 p-sect result-col">

       <h3 style="clear:both;">Detailed node tables</h3>
       <input type="button" id="more_4" value="More Detailed (Group 4)"> 
        
        
        <div id="all_tables" style="clear:both;"></div>

    </div>
  </div>
</div>

<br>
<br>
<br>


<script>
  $(document).ready(function() {
    brython(1);
  });
</script>


{% endblock %}



